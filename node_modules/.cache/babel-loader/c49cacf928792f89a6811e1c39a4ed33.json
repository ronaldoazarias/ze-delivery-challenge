{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ronaldo.azarias\\\\Desktop\\\\frontend\\\\src\\\\pages\\\\Products.js\";\nimport React, { Component, useEffect } from 'react';\nimport { gql } from 'apollo-boost';\nimport './Product.css';\nimport client from '../services/api';\nimport { renderToStringWithData } from 'react-apollo';\nexport default class Products extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      categories: [],\n      products: []\n    };\n\n    this.getCategories = () => {\n      client.query({\n        query: gql`\n          {\n            allCategory{\n              title\n              id\n            }\n          }\n        `\n      }).then(result => {\n        this.setState({\n          categories: result.data.allCategory\n        });\n      });\n    };\n\n    this.getProducts = (lat, lng) => {\n      console.log('lat: ' + lat + ' lng: ' + lng);\n      let dt = new Date().toISOString();\n      client.query({\n        query: gql`\n            {\n              pocSearch(algorithm: \"NEAREST\",\n                        lat: \"${lat}\",\n                        long: \"${lng}\",\n                        now: \"${dt}\") {\n                id\n              }\n            }\n          `\n      }).then(result => {\n        var pocId = result.data.pocSearch[0].id;\n        console.log(pocId);\n        console.log('iniciando consulta de produtos');\n        this.state.categories.map(categorie => {\n          client.query({\n            query: gql`\n                {  \n                  poc(id: 532){\n                    id\n                    products(search: \"\", categoryId: ${categorie.id}){\n                      id\n                      title\n                      images{\n                        url\n                      }                \n                      productVariants{\n                        price\n                        imageUrl\n                      }\n                    }\n                  }\n                }\n              `\n          }).then(result => {\n            console.log('Obteve retorno dos produtos');\n            this.setState({\n              products: result.data.poc.products\n            });\n            console.log(categorie.title);\n            console.log(result.data.poc.products);\n          });\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getCategories();\n    this.getProducts(-23.632919, -46.699453);\n    console.log(this.state.categories);\n    console.log(this.state.products);\n  }\n\n  renderProduct(product) {\n    return React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: product.images[0].url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(\"footer\", {\n      className: \"card-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-footer-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, product.title), React.createElement(\"div\", {\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"del\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"R$ \", product.productVariants[0].price * 1.20)), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"R$ \", product.productVariants[0].price))), React.createElement(\"div\", {\n      className: \"card-footer-qtd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-footer-total\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"desc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Total\"), React.createElement(\"div\", {\n      className: \"value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"R$ 10,99\")), React.createElement(\"div\", {\n      className: \"qtd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"btn btn-qtd-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"-\"), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"qtd-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"btn btn-qtd-change\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"a\", {\n      className: \"btn btn-add\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Adicionar ao carrinho\"))));\n  }\n\n  renderCategory(category) {\n    //const { products } = this.state;\n    //console.log(this.state);\n    return React.createElement(\"div\", {\n      className: \"products\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      className: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, category.title), React.createElement(\"div\", {\n      className: \"cards\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }));\n  }\n\n  render() {\n    //this.getCategories();\n    console.log(this.state);\n    const {\n      categories,\n      products\n    } = this.state;\n    let productsContent = '';\n    categories.map(category => {\n      console.log(category.id);\n      productsContent.push(renderProduct(products));\n    });\n    return React.createElement(\"div\", {\n      className: \"main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, categories.map(this.renderCategory));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/ronaldo.azarias/Desktop/frontend/src/pages/Products.js"],"names":["React","Component","useEffect","gql","client","renderToStringWithData","Products","state","categories","products","getCategories","query","then","result","setState","data","allCategory","getProducts","lat","lng","console","log","dt","Date","toISOString","pocId","pocSearch","id","map","categorie","poc","title","componentDidMount","renderProduct","product","images","url","productVariants","price","renderCategory","category","render","productsContent","push"],"mappings":"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","sourcesContent":["import React, { Component, useEffect } from 'react';\nimport { gql } from 'apollo-boost';\nimport './Product.css';\n\nimport client from '../services/api';\nimport { renderToStringWithData } from 'react-apollo';\n\nexport default class Products extends Component {\n  state = {\n    categories: [],\n    products: []\n  };    \n\n  getCategories = () => {\n    client\n      .query({\n        query: gql`\n          {\n            allCategory{\n              title\n              id\n            }\n          }\n        `\n      })\n      .then(result => {\n        this.setState({ categories: result.data.allCategory });\n      });  \n   }\n\n  componentDidMount(){\n    this.getCategories();\n    this.getProducts(-23.632919, -46.699453);\n    console.log(this.state.categories);\n    console.log(this.state.products);\n  }\n\n   getProducts = (lat, lng) => {\n     console.log('lat: '+lat+' lng: '+lng);\n     let dt = new Date().toISOString();\n     client\n        .query({\n          query: gql`\n            {\n              pocSearch(algorithm: \"NEAREST\",\n                        lat: \"${lat}\",\n                        long: \"${lng}\",\n                        now: \"${dt}\") {\n                id\n              }\n            }\n          `\n        })  \n        .then(result => {\n          var pocId = result.data.pocSearch[0].id;\n          console.log(pocId);\n          console.log('iniciando consulta de produtos');\n          this.state.categories.map((categorie) => {\n          client\n            .query({\n              query: gql`\n                {  \n                  poc(id: 532){\n                    id\n                    products(search: \"\", categoryId: ${categorie.id}){\n                      id\n                      title\n                      images{\n                        url\n                      }                \n                      productVariants{\n                        price\n                        imageUrl\n                      }\n                    }\n                  }\n                }\n              `\n            })\n            .then(result => {\n              console.log('Obteve retorno dos produtos');\n              this.setState({ products: result.data.poc.products });\n              console.log(categorie.title);\n              console.log(result.data.poc.products);              \n            });\n          });\n        })\n    }    \n\n  renderProduct(product){\n    return (\n    <div className=\"card\">\n    <div className=\"img\">\n      <img src={product.images[0].url} />\n    </div>\n    <footer className=\"card-footer\">\n      <div className=\"card-footer-info\">\n        <strong>{product.title}</strong>\n        <div className=\"price\">\n          <span><del>R$ {product.productVariants[0].price*1.20}</del></span>\n          <strong>R$ {product.productVariants[0].price}</strong>\n        </div>  \n      </div>\n      <div className=\"card-footer-qtd\">\n        <div className=\"card-footer-total\">\n          <div className=\"desc\">\n            Total\n          </div>\n          <div  className=\"value\">\n            R$ 10,99\n          </div>\n        </div>\n        <div className=\"qtd\">\n         <a className=\"btn btn-qtd-change\">-</a>\n         <input type=\"number\" className=\"qtd-input\" />\n         <a className=\"btn btn-qtd-change\">+</a>\n        </div>                 \n        <a className=\"btn btn-add\">Adicionar ao carrinho</a>              \n      </div>\n    </footer>\n    </div>);\n  }\n\n  renderCategory (category) {\n    //const { products } = this.state;\n    //console.log(this.state);\n    return (\n      <div className=\"products\">   \n      <strong className=\"category\">{category.title}</strong>\n      <div className=\"cards\">        \n      </div>\n      </div>\n    );\n  }\n\n  render () {\n    //this.getCategories();\n    console.log(this.state);\n    const { categories, products } = this.state;\n    let productsContent = '';\n    categories.map((category) =>{\n      console.log(category.id);\n      productsContent.push(renderProduct(products));\n    })\n\n    return (\n      <div className=\"main-container\">\n        {categories.map(this.renderCategory)}\n      </div>\n    );\n    \n  }\n}"]},"metadata":{},"sourceType":"module"}